<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Fan OBJ Viewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f0f0f0;
        }
        canvas {
            border: 2px solid #333;
            background-color: white;
            display: block;
            margin: 20px 0;
        }
        .controls {
            background: white;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .control-group {
            margin: 10px 0;
        }
        label {
            display: inline-block;
            width: 150px;
            font-weight: bold;
        }
        input[type="range"] {
            width: 300px;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <h1>Fan 3D Model Viewer</h1>
    <h2>Interactive OBJ Viewer</h2>
    
    <div class="controls">
        <h3>Camera Controls</h3>
        <div class="control-group">
            <label>Rotate X (Up/Down):</label>
            -90째 <input id="sliderRotateX" type="range" min="-90" max="90" value="0" step="1"/> 90째
        </div>
        <div class="control-group">
            <label>Rotate Y (Left/Right):</label>
            -180째 <input id="sliderRotateY" type="range" min="-180" max="180" value="0" step="1"/> 180째
        </div>
        <div class="control-group">
            <label>Zoom:</label>
            50 <input id="sliderZoom" type="range" min="50" max="500" value="200" step="10"/> 500
        </div>
    </div>

    <div class="controls">
        <h3>Object Controls</h3>
        <div class="control-group">
            <label>Translate X:</label>
            -200 <input id="objTranslateX" type="range" min="-200" max="200" value="0" step="1"/> 200
        </div>
        <div class="control-group">
            <label>Translate Y:</label>
            -200 <input id="objTranslateY" type="range" min="-200" max="200" value="0" step="1"/> 200
        </div>
        <div class="control-group">
            <label>Translate Z:</label>
            -200 <input id="objTranslateZ" type="range" min="-200" max="200" value="0" step="1"/> 200
        </div>

        <div class="control-group">
            <label>Rotate X (deg):</label>
            -180 <input id="objRotateX" type="range" min="-180" max="180" value="0" step="1"/> 180
        </div>
        <div class="control-group">
            <label>Rotate Y (deg):</label>
            -180 <input id="objRotateY" type="range" min="-180" max="180" value="0" step="1"/> 180
        </div>
        <div class="control-group">
            <label>Rotate Z (deg):</label>
            -180 <input id="objRotateZ" type="range" min="-180" max="180" value="0" step="1"/> 180
        </div>

        <div class="control-group">
            <label>Scale:</label>
            0.01 <input id="objScale" type="range" min="0.01" max="5" value="0.1" step="0.01"/> 5
        </div>

        <hr/>

        <h3>Instructions:</h3>
        <ul>
            <li><strong>Mouse Drag:</strong> Rotate camera around model</li>
            <li><strong>Mouse Wheel:</strong> Zoom in/out</li>
            <li><strong>Sliders:</strong> Precise control of camera angles and zoom</li>
        </ul>
    </div>

    <div class="controls">
        <h3>Debug</h3>
        <div class="control-group">
            <label>Hover pick mode:</label>
            <input id="debugToggle" type="checkbox"/> Enable (hover canvas to identify objects)
        </div>
        <div id="debugInfo" style="margin-top:8px;">Hover canvas to see object info (enable debug).</div>
    </div>

    <canvas id="gl-canvas" width="800" height="600"></canvas>

    <script id="vertex-shader" type="x-shader/x-vertex">
    #version 300 es
    in vec4 aPosition;
    uniform mat4 modelViewMatrix;
    uniform mat4 projectionMatrix;
    uniform mat4 modelMatrix;

    out vec3 vNormal;

    void main() {
        gl_Position = projectionMatrix * modelViewMatrix * modelMatrix * aPosition;
        vNormal = normalize(vec3(modelViewMatrix * modelMatrix * aPosition));
    }
    </script>

    <script id="pick-vertex-shader" type="x-shader/x-vertex">
    #version 300 es
    in vec4 aPosition;
    uniform mat4 modelViewMatrix;
    uniform mat4 projectionMatrix;
    uniform mat4 modelMatrix;

    void main() {
        gl_Position = projectionMatrix * modelViewMatrix * modelMatrix * aPosition;
    }
    </script>

    <script id="pick-fragment-shader" type="x-shader/x-fragment">
    #version 300 es
    precision mediump float;
    uniform vec3 uColor;
    out vec4 fColor;
    void main() {
        fColor = vec4(uColor, 1.0);
    }
    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
    #version 300 es
    precision mediump float;
    
    in vec3 vNormal;
    uniform vec3 uColor;
    out vec4 fColor;

    void main() {
        vec3 lightDir = normalize(vec3(0.5, 0.8, 1.0));
        float diff = max(dot(normalize(vNormal), lightDir), 0.3);
        vec3 color = uColor * diff;
        fColor = vec4(color, 1.0);
    }
    </script>

    <script src="MVnew.js"></script>
    <script src="InitShaders.js"></script>
    <script src="objParser.js"></script>
    <script src="fanObjViewer.js"></script>
</body>
</html>